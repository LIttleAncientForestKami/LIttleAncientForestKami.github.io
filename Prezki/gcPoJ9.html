<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"><title>Odśmiecanie pamięci po Jawie 9</title><meta name="author" content="Tomasz Borek, @LAFK pl,"><link rel="icon" type="image/x-icon" href="./img//favicon.ico"><link rel="stylesheet" href="reveal.js/dist/reset.css"><link rel="stylesheet" href="reveal.js/dist/reveal.css"><link rel="stylesheet" href="reveal.js/dist/theme/white.css" id="theme"><!--This CSS is generated by the Asciidoctor reveal.js converter to further integrate AsciiDoc's existing semantic with reveal.js--><style type="text/css">.reveal div.right {
  float: right
}

/* source blocks */
.reveal .listingblock.stretch > .content {
  height: 100%
}

.reveal .listingblock.stretch > .content > pre {
  height: 100%
}

.reveal .listingblock.stretch > .content > pre > code {
  height: 100%;
  max-height: 100%
}

/* auto-animate feature */
/* hide the scrollbar when auto-animating source blocks */
.reveal pre[data-auto-animate-target] {
  overflow: hidden;
}

.reveal pre[data-auto-animate-target] code {
  overflow: hidden;
}

/* add a min width to avoid horizontal shift on line numbers */
code.hljs .hljs-ln-line.hljs-ln-n {
  min-width: 1.25em;
}

/* tables */
table {
  border-collapse: collapse;
  border-spacing: 0
}

table {
  margin-bottom: 1.25em;
  border: solid 1px #dedede
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
  padding: .5em .625em .625em;
  font-size: inherit;
  text-align: left
}

table tr th, table tr td {
  padding: .5625em .625em;
  font-size: inherit
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
  display: table-cell;
  line-height: 1.6
}

td.tableblock > .content {
  margin-bottom: 1.25em
}

td.tableblock > .content > :last-child {
  margin-bottom: -1.25em
}

table.tableblock, th.tableblock, td.tableblock {
  border: 0 solid #dedede
}

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock {
  border-width: 0 1px 1px 0
}

table.grid-all > tfoot > tr > .tableblock {
  border-width: 1px 1px 0 0
}

table.grid-cols > * > tr > .tableblock {
  border-width: 0 1px 0 0
}

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock {
  border-width: 0 0 1px
}

table.grid-rows > tfoot > tr > .tableblock {
  border-width: 1px 0 0
}

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child {
  border-right-width: 0
}

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock {
  border-bottom-width: 0
}

table.frame-all {
  border-width: 1px
}

table.frame-sides {
  border-width: 0 1px
}

table.frame-topbot, table.frame-ends {
  border-width: 1px 0
}

.reveal table th.halign-left, .reveal table td.halign-left {
  text-align: left
}

.reveal table th.halign-right, .reveal table td.halign-right {
  text-align: right
}

.reveal table th.halign-center, .reveal table td.halign-center {
  text-align: center
}

.reveal table th.valign-top, .reveal table td.valign-top {
  vertical-align: top
}

.reveal table th.valign-bottom, .reveal table td.valign-bottom {
  vertical-align: bottom
}

.reveal table th.valign-middle, .reveal table td.valign-middle {
  vertical-align: middle
}

table thead th, table tfoot th {
  font-weight: bold
}

tbody tr th {
  display: table-cell;
  line-height: 1.6
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
  font-weight: bold
}

thead {
  display: table-header-group
}

.reveal table.grid-none th, .reveal table.grid-none td {
  border-bottom: 0 !important
}

/* kbd macro */
kbd {
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  display: inline-block;
  color: rgba(0, 0, 0, .8);
  font-size: .65em;
  line-height: 1.45;
  background: #f7f7f7;
  border: 1px solid #ccc;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em white inset;
  box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em #fff inset;
  margin: 0 .15em;
  padding: .2em .5em;
  vertical-align: middle;
  position: relative;
  top: -.1em;
  white-space: nowrap
}

.keyseq kbd:first-child {
  margin-left: 0
}

.keyseq kbd:last-child {
  margin-right: 0
}

/* callouts */
.conum[data-value] {
  display: inline-block;
  color: #fff !important;
  background: rgba(0, 0, 0, .8);
  -webkit-border-radius: 50%;
  border-radius: 50%;
  text-align: center;
  font-size: .75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-style: normal;
  font-weight: bold
}

.conum[data-value] * {
  color: #fff !important
}

.conum[data-value] + b {
  display: none
}

.conum[data-value]:after {
  content: attr(data-value)
}

pre .conum[data-value] {
  position: relative;
  top: -.125em
}

b.conum * {
  color: inherit !important
}

.conum:not([data-value]):empty {
  display: none
}

/* Callout list */
.hdlist > table, .colist > table {
  border: 0;
  background: none
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
  background: none
}

td.hdlist1, td.hdlist2 {
  vertical-align: top;
  padding: 0 .625em
}

td.hdlist1 {
  font-weight: bold;
  padding-bottom: 1.25em
}

/* Disabled from Asciidoctor CSS because it caused callout list to go under the
 * source listing when .stretch is applied (see #335)
 * .literalblock+.colist,.listingblock+.colist{margin-top:-.5em} */
.colist td:not([class]):first-child {
  padding: .4em .75em 0;
  line-height: 1;
  vertical-align: top
}

.colist td:not([class]):first-child img {
  max-width: none
}

.colist td:not([class]):last-child {
  padding: .25em 0
}

/* Override Asciidoctor CSS that causes issues with reveal.js features */
.reveal .hljs table {
  border: 0
}

/* Callout list rows would have a bottom border with some reveal.js themes (see #335) */
.reveal .colist > table th, .reveal .colist > table td {
  border-bottom: 0
}

/* Fixes line height with Highlight.js source listing when linenums enabled (see #331) */
.reveal .hljs table thead tr th, .reveal .hljs table tfoot tr th, .reveal .hljs table tbody tr td, .reveal .hljs table tr td, .reveal .hljs table tfoot tr td {
  line-height: inherit
}

/* Columns layout */
.columns .slide-content {
  display: flex;
}

.columns.wrap .slide-content {
  flex-wrap: wrap;
}

.columns.is-vcentered .slide-content {
  align-items: center;
}

.columns .slide-content > .column {
  display: block;
  flex-basis: 0;
  flex-grow: 1;
  flex-shrink: 1;
}

.columns .slide-content > .column > * {
  padding: .75rem;
}

/* See #353 */
.columns.wrap .slide-content > .column {
  flex-basis: auto;
}

.columns .slide-content > .column.is-full {
  flex: none;
  width: 100%;
}

.columns .slide-content > .column.is-four-fifths {
  flex: none;
  width: 80%;
}

.columns .slide-content > .column.is-three-quarters {
  flex: none;
  width: 75%;
}

.columns .slide-content > .column.is-two-thirds {
  flex: none;
  width: 66.6666%;
}

.columns .slide-content > .column.is-three-fifths {
  flex: none;
  width: 60%;
}

.columns .slide-content > .column.is-half {
  flex: none;
  width: 50%;
}

.columns .slide-content > .column.is-two-fifths {
  flex: none;
  width: 40%;
}

.columns .slide-content > .column.is-one-third {
  flex: none;
  width: 33.3333%;
}

.columns .slide-content > .column.is-one-quarter {
  flex: none;
  width: 25%;
}

.columns .slide-content > .column.is-one-fifth {
  flex: none;
  width: 20%;
}

.columns .slide-content > .column.has-text-left {
  text-align: left;
}

.columns .slide-content > .column.has-text-justified {
  text-align: justify;
}

.columns .slide-content > .column.has-text-right {
  text-align: right;
}

.columns .slide-content > .column.has-text-left {
  text-align: left;
}

.columns .slide-content > .column.has-text-justified {
  text-align: justify;
}

.columns .slide-content > .column.has-text-right {
  text-align: right;
}

.text-left {
  text-align: left !important
}

.text-right {
  text-align: right !important
}

.text-center {
  text-align: center !important
}

.text-justify {
  text-align: justify !important
}

.footnotes {
  border-top: 1px solid rgba(0, 0, 0, 0.2);
  padding: 0.5em 0 0 0;
  font-size: 0.65em;
  margin-top: 4em;
}

.byline {
  font-size:.8em
}
ul.byline {
  list-style-type: none;
}
ul.byline li + li {
  margin-top: 0.25em;
}
</style><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/v4-shims.min.css"><style>
pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f8f8f8; }
pre.pygments .tok-c { color: #408080; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #FF0000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
pre.pygments .tok-go { color: #888888 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #7D9029 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #A0A000 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title"><h1>Odśmiecanie pamięci po Jawie 9</h1><div class="preamble"><div class="paragraph"><p>Żegnamy CMS, domyślny jest G1, dochodzą Epsilon, Shenandoah i ZGC. Który (i kiedy) wybrać?</p></div>
<div class="paragraph"><p><span class="image"><img src="./img/polishJUGlogo.jpg" alt="100" width="100"></span><br>
<span class="image"><img src="./img/morda.jpeg" alt="50" width="50" height="morda LAFK_pl"></span></p></div></div><p class="byline">
  <span class="author">Tomasz Borek, @LAFK pl, <a href="http://lafkblogs.wordpress.com" class="bare">http://lafkblogs.wordpress.com</a></span>
  </p></section>
<section><section id="_start"><h2>Start</h2><div class="slide-content"><div class="paragraph"><p>CO WYBRAĆ?! JAK ŻYĆ?! (to zależy oczywiście)</p></div><div class="olist arabic"><ol class="arabic"><li class="fragment"><p>CMS i trzymamy się wersji gdzie on jeszcze jest?</p></li><li class="fragment"><p>G1 bo wystarczy albo nawet lepiej pasuje?</p></li><li class="fragment"><p>Shenandoah, wiele TB sterty, Red Hat potrafi?</p></li><li class="fragment"><p>Epsilon - śmieciarz co nie odśmieca</p></li><li class="fragment"><p>ZGC - wiele TB sterty, bezwzględnie niskopauzowy?</p></li></ol></div></div></section><section id="_agenda"><h2>Agenda</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p>o mnie</p></li><li><p>odśmiecanie pamięci w 4 slajdach</p></li><li><p>CMS, G1GC</p></li><li><p>Epsilon, Shenandoah, ZGC</p></li><li><p>podsumowanie</p></li></ol></div></div></section><section id="_o_mnie"><h2>O mnie</h2><div class="slide-content"><div class="imageblock"><img src="./img/LAFK_pl.png" alt="LAFK pl"></div></div></section><section id="_ja_w_sieci"><h2>Ja w sieci</h2><div class="slide-content"><div class="imageblock"><img src="./img/LAFK_pl_wSieci.png" alt="LAFK pl wSieci"></div></div></section><section id="_zlecenia"><h2>Zlecenia</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p>audyty kodu, infrastruktury, komponentów, systemu</p></li><li><p>testy i audyty wydajności czy <strong>bezpieczeństwa</strong></p></li><li><p>wchodzę w bazy danych, GNU/Linuxy, sieci czy bezpiekę</p></li><li><p>programy na zlecenie</p></li><li><p>prelekcje, wykłady tematyczne, warsztaty, szkolenia</p></li></ol></div></div></section><section id="_pytania"><h2>Pytania?</h2><div class="slide-content"><div class="imageblock"><img src="./img/question-mark.jpg" alt="question mark"></div></div></section></section>
<section><section id="_odśmiecanie_w_4_slajdach"><h2>Odśmiecanie w 4 slajdach</h2><div class="slide-content"><div class="quoteblock"><blockquote><div class="paragraph"><p>Znakomita większość obiektów umiera młodo.</p></div></blockquote><div class="attribution">&#8212; hipoteza pokoleniowa</div></div><div class="imageblock"><img src="./img/orgPamięci.png" alt="orgPamięci"></div><div class="title">Organizacja pamięci (uproszczona)</div></div></section><section id="_osiągalność"><h2>Osiągalność</h2><div class="slide-content"><div class="imageblock"><img src="./img/osiągalność.png" alt="osiągalność"></div><div class="title">A co jak wątki aplikacji wtedy hasają?</div></div></section><section id="_wnioski"><h2>Wnioski</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p>każda zbiórka:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p><strong>pauzuje</strong> (stopuje świat, zatrzymuje wątki apki)</p></li><li><p>czyści Eden</p></li><li><p>i przerzuca pomiędzy ocaleńcami (o2 i o1)</p></li></ol></div></li><li><p>promocja to przerzutka z młodego do starego</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>przedwczesna jak brak miejsca w ocaleńcach</p></li></ol></div></li><li><p><strong>rozmiar sterty</strong>, <strong>ilość żywych</strong>, <strong>ilość korzeni</strong> &#8658; długość zbiórki (<strong>pauzy</strong>)</p></li></ol></div></div></section><section id="_strategie"><h2>Strategie</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p><strong>przepustowość</strong> (równoleglenie) - rzadko pauza, ale potencjalnie duża</p></li><li><p><strong>responsywność</strong> (współbieżność) - dużo małych pauz, niezauważalnych</p></li></ol></div></div></section><section id="_źródła"><h2>Źródła</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p><a href="http://gchandbook.org/">Książka o automatycznym zarządzaniu pamięci, tzw. GC Handbook, Jones, Hosking, Moss</a></p></li><li><p>publikacje Warburtona, Ragozina, Bordeta, Beckwith, Shipileva</p></li><li><p><a href="https://blogs.oracle.com/javamagazine/understanding-garbage-collectors">Java Magazine, understanding GCs</a></p></li></ol></div></div></section><section id="_pytania_2"><h2>Pytania?</h2><div class="slide-content"><div class="imageblock"><img src="./img/question-mark.jpg" alt="question mark"></div></div></section></section>
<section><section id="_cms_do_14"><h2>CMS (do 14)</h2><div class="slide-content"><div class="quoteblock"><blockquote><div class="paragraph"><p>Concurrent Mark-Sweep - czyli bez Compact</p></div></blockquote></div><div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa fa-lightbulb-o" title="Tip"></i></td><td class="content">współbieżnie z wątkami apki, <strong>reaktywność</strong></td></tr></table></div><div class="admonitionblock warning"><table><tr><td class="icon"><i class="fa fa-warning" title="Warning"></i></td><td class="content">ConcurrentModeFailure bywa zabójczy</td></tr></table></div><div class="olist arabic"><ol class="arabic"><li><p>By użyć: <code>‑XX:+UseConcMarkSweepGC</code></p></li><li><p>By stroić: hmmm, momencik, parsuję&#8230;&#8203; 20 flag</p></li></ol></div></div></section><section id="_by_stroić"><h2>By stroić:</h2><div class="slide-content"><div class="listingblock stretch"><div class="content"><pre class="pygments highlight"><code><span></span>-Xmx&lt;size&gt; ‑XX:+UseParNewGC ‑XX:ParallelGCThreads=&lt;n&gt; 
‑XX:+CMSConcurrentMTEnabled ‑XX:ConcGCThreads=&lt;n&gt; 

‑XX:+UseCMSInitiatingOccupancyOnly 
‑XX:CMSInitiatingOccupancyFraction=70 
-XX:CMSBootstrapOccupancy=10 
-XX:+CMSIncrementalMode 

‑XX:+ExplicitGCInvokesConcurrentAndUnloadsClasses 
‑XX:+ExplicitGCInvokesConcurrent 
-XX:+CMSClassUnloadingEnabled

-XX:CMSTriggerRatio=70 
-XX:CMSTriggerPermRatio=90 

-XX:CMSWaitDuration=2000

-XX:+CMSParallelRemarkEnabled 
-XX:+CMSParallelSurvivorRemarkEnabled 
-XX:+CMSScavengeBeforeRemark
-XX:+CMSScheduleRemarkEdenSizeThreshold 
-XX:CMSScheduleRemarkEdenPenetration=20 
-XX:CMSScheduleRemarkSamplingRatio=4 
-XX:CMSRemarkVerifyVariant=1</code></pre></div></div>
<div class="paragraph"><p>Jawa 14 pożegnała CMS, algorytm który wciąż potrafił i osiągał, ale którego utrzymanie było conajmniej problematycznie.</p></div></div></section><section id="_technikalia"><h2>Technikalia</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p>ConcurentModeFailure - szeregowo po starym pokoleniu po fragmentacji pamięci</p></li><li><p>dobre dla okienkowców (np. Intellij używa) - nie zamarznie interfejs</p></li><li><p>dużo pokręteł! wyładowuje klasy, współbieżny z apką, na stare pokolenie, istotne jaki partner w młodym pokoleniu, <code>System.gc()</code>&#8230;&#8203;</p></li></ol></div></div></section><section id="_źródła_2"><h2>Źródła</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p><a href="https://docs.oracle.com/en/java/javase/11/gctuning/concurrent-mark-sweep-cms-collector.html#GUID-9ED1CD04-A251-459A-9F49-008509F2FAE7">Oracle, artykuł jak stroić</a></p></li><li><p><a href="http://blog.ragozin.info/2011/10/java-cg-hotspots-cms-and-heap.html">Ragozin o kłopotach z promocją i współbieżnością, technicznie</a>, polecam też linki tamże</p></li><li><p><a href="https://blog.ycrash.io/2023/11/14/java-cms-gc-tuning/">YCrash prosto o flagach CMSa</a></p></li></ol></div></div></section><section id="_pytania_3"><h2>Pytania?</h2><div class="slide-content"><div class="imageblock"><img src="./img/question-mark.jpg" alt="question mark"></div></div></section></section>
<section><section id="_g1gc_8"><h2>G1GC (8)</h2><div class="slide-content"><div class="quoteblock"><blockquote><div class="paragraph"><p>Wpierw śmieci, czyli Garbage 1(st)</p></div></blockquote></div><div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa fa-lightbulb-o" title="Tip"></i></td><td class="content">regionalizacja sterty - redefiniuje i uwspółbieżnia pokoleniowość</td></tr></table></div><div class="olist arabic"><ol class="arabic"><li><p>By użyć: nic (domyślny) lub <code>-XX:+UseG1GC</code></p></li><li><p>By stroić: rozmiar sterty, ilość i rozmiar regionów (12 flag)</p></li></ol></div></div></section><section id="_jak_to_działa"><h2>Jak to działa?</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p>dobierasz ile regionów (2048-) i o jakim rozmiarze (1-32MB)</p></li><li><p>alokacja jest w Edenie i obszarach dla olbrzymów</p></li><li><p>G1 prowadzi buchalterię per region</p></li><li><p>pokolenia są rozbite a nie ciągłe</p></li></ol></div></div></section><section id="_regionalizacja"><h2>Regionalizacja</h2><div class="slide-content"><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:66.6666%"><col style="width:33.3334%"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p><span class="image"><img src="./img/JakDziałaG1_Regiony.png" alt="ilustracja regionalizacji sterty - obraz ukazuje pokolorowane regiony"></span></p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="olist arabic"><ol class="arabic"><li><p>niezależne, mniejsze zbiórki</p></li><li><p>młode, stare, mieszane</p></li></ol></div></div></td></tr></table></div></section><section id="_ergonomia_wolne_regiony"><h2>Ergonomia - wolne regiony</h2><div class="slide-content"><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:66.6666%"><col style="width:33.3334%"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p><span class="image"><img src="./img/JakDziałaG1_Regiony.png" alt="ilustracja regionalizacji sterty - obraz ukazuje pokolorowane regiony"></span></p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="olist arabic"><ol class="arabic"><li><p>rośnie czego potrzeba</p></li><li><p>ewakuacja oddaje region</p></li></ol></div></div></td></tr></table></div></section><section id="_koniec_przedwczesnej_promocji"><h2>Koniec przedwczesnej promocji</h2><div class="slide-content"><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:66.6666%"><col style="width:33.3334%"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><div><div class="paragraph"><p><span class="image"><img src="./img/JakDziałaG1_Regiony.png" alt="ilustracja regionalizacji sterty - obraz ukazuje pokolorowane regiony"></span></p></div></div></td><td class="tableblock halign-left valign-top"><div><div class="olist arabic"><ol class="arabic"><li><p><em>olbrzymy</em> i Eden to alokacja</p></li><li><p>min pół regionu</p></li><li><p>2,1 czy 2,9  i tak 3</p></li></ol></div></div></td></tr></table></div></section><section id="_technikalia_2"><h2>Technikalia</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p>zastępca CMSa, domyślny algo od Jawy 9,</p></li><li><p>wypuszczony w 2006, dojrzały teraz</p></li><li><p>regionalizacja sterty</p></li><li><p>dużo ciekawych zmian i usprawnień doprowadzających go do poziomu wyrafinowania poprzedników</p></li><li><p>optymalizacje na jakie G1 może sobie pozwolić</p></li></ol></div></div></section><section id="_źródła_3"><h2>Źródła</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p><a href="https://lafkblogs.wordpress.com/2017/06/15/jak-dziala-g1/">Własny artykuł z bloga</a></p></li><li><p><a href="https://www.oracle.com/technical-resources/articles/java/g1gc.html">Oracle radzi jak stroić</a></p></li><li><p>odpowiednie JEPy</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p><a href="https://openjdk.java.net/jeps/344">Przerywalne mieszane zbiórki, JEP 344</a></p></li><li><p><a href="https://openjdk.java.net/jeps/346">Szybki zwrot nieużywanej pamięci, JEP 346</a></p></li><li><p><a href="https://openjdk.java.net/jeps/345">NUMA-świadoma alokacja pamięci, JEP 345</a></p></li></ol></div></li></ol></div></div></section><section id="_pytania_4"><h2>Pytania?</h2><div class="slide-content"><div class="imageblock"><img src="./img/question-mark.jpg" alt="question mark"></div></div></section></section>
<section><section id="_epsilon_gc_11"><h2>Epsilon GC (11)</h2><div class="slide-content"><div class="quoteblock"><blockquote><div class="paragraph"><p>ε w językach formalnych w informatyce oznacza pusty napis (<code>""</code>)</p></div></blockquote></div><div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa fa-lightbulb-o" title="Tip"></i></td><td class="content">Na wszystkie sytuacje, kiedy marzy Ci się algo co&#8230;&#8203; NIC NIE ROBI (JDK11+)</td></tr></table></div><div class="olist arabic"><ol class="arabic"><li><p>By użyć: <code>-XX:+UseEpsilonGC -XX:+UnlockExperimentalVMOptions</code></p></li><li><p>By stroić: &#8230;&#8203;</p></li></ol></div></div></section><section id="_technikalia_3"><h2>Technikalia</h2><div class="slide-content"><div class="paragraph"><p>Śmieciarz ma heurystyki startu, prowadzi buchalterię, znajduje korzenie, chodzi po grafie obiektów, pauzuje świat, zlicza referencje, uważa na cykle, odpowiada za alokację i - nomen omen - odśmiecanie pamięci, robi analizę osiągalności, używa barier&#8230;&#8203;</p></div>
<div class="paragraph"><p><strong>Epsilon dba o alokację</strong>. Reklamacja pamięci? To nie jego broszka.</p></div></div></section><section id="_po_co"><h2>Po co?</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li class="fragment"><p>testy wydajnościowe bez śmieciarza</p></li><li class="fragment"><p>testy kiedy apka zeżre pamięć</p></li><li class="fragment"><p>testy interfejsu odśmiecania</p></li><li class="fragment"><p>robienie własnego śmieciarza <sup class="footnote">[<span class="footnote" title="View footnote.">1</span>]</sup></p></li><li class="fragment"><p>start, szybka lecz ostra praca, koniec</p></li><li class="fragment"><p>nauka</p></li></ol></div></div><div class="footnotes"><div class="footnote">1. Fajna zabawa, 20 minut i dużo się można nauczyć</div></div></section><section id="_źródła_4"><h2>Źródła</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p><a href="https://openjdk.java.net/jeps/318">JEP-318</a></p></li><li><p><a href="https://blogs.oracle.com/javamagazine/epsilon-the-jdks-do-nothing-garbage-collector">Java Magazine, Epsilon</a></p></li></ol></div></div></section><section id="_własny_śmieciarz"><h2>Własny śmieciarz</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p><a href="https://shipilev.net/jvm/diy-gc/" class="bare">https://shipilev.net/jvm/diy-gc/</a></p></li><li><p><a href="https://shipilev.net/jvm/diy-gc/kennke-fosdem-2019.webm" class="bare">https://shipilev.net/jvm/diy-gc/kennke-fosdem-2019.webm</a></p></li></ol></div></div></section><section id="_pytania_5"><h2>Pytania?</h2><div class="slide-content"><div class="imageblock"><img src="./img/question-mark.jpg" alt="question mark"></div></div></section></section>
<section><section id="_shenandoah_15_od_12_8_11"><h2>Shenandoah (15, od 12, +8 +11)</h2><div class="slide-content"><div class="quoteblock"><blockquote><div class="paragraph"><p>O Shenandoah, jej imię było&#8230;&#8203;</p></div></blockquote></div><div class="admonitionblock caution"><table><tr><td class="icon"><i class="fa fa-fire" title="Caution"></i></td><td class="content">Nie OracleJDK.</td></tr></table></div><div class="olist arabic"><ol class="arabic"><li><p>By użyć: <code>-XX:+UseShenandoahGC -XX:+UnlockExperimentalVMOptions</code></p></li><li><p>By stroić: jest rekomendowana konfiguracja</p></li></ol></div></div></section><section id="_rekomendowana_konfiguracja"><h2>Rekomendowana konfiguracja:</h2><div class="slide-content"><div class="listingblock"><div class="content"><pre>-XX:+AlwaysPreTouch -Xmx&lt;X&gt; -Xms&lt;X&gt;
-XX:+UseLargePages
-XX:+UseNUMA -XX:-UseBiasedLocking -XX:+DisableExplicitGC</pre></div></div></div></section><section id="_regiony_inaczej"><h2>Regiony inaczej</h2><div class="slide-content"><div class="imageblock"><img src="./img/shenandoah-gc-cycle.svg" alt="shenandoah gc cycle"></div><div class="title">Za: Wiki projektu</div></div></section><section id="_technikalia_4"><h2>Technikalia</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p><strong>współbieżnie ewakuuje obiekty</strong></p></li><li><p><strong>współbieżnie aktualizuje referencje do obiektów</strong></p></li><li><p>sterty różnych rozmiarów mają podobne pauzy</p></li><li><p>współbieżny i równoległy i jednopokoleniowy</p></li><li><p>pauzy podyktowane są głównie rozmiarem zbioru korzeni</p></li></ol></div></div></section><section id="_źródła_5"><h2>Źródła</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p><a href="https://wiki.openjdk.java.net/display/shenandoah/Main">Wiki projektu</a></p></li><li><p><a href="https://blogs.oracle.com/javamagazine/understanding-garbage-collectors">Java Magazine, artykuł o śmieciarzach</a></p></li><li><p><a href="https://blogs.oracle.com/javamagazine/understanding-the-jdks-new-superfast-garbage-collectors">Java Magazine, artykuł o superszybkich śmieciarzach</a></p></li><li><p><a href="https://shipilev.net/talks/jugbb-Sep2019-shenandoah.pdf">Shipilev wykłada o Shenandoah</a>, bardzo technicznie</p></li></ol></div></div></section><section id="_pytania_6"><h2>Pytania?</h2><div class="slide-content"><div class="imageblock"><img src="./img/question-mark.jpg" alt="question mark"></div></div></section></section>
<section><section id="_zgc_15_od_11"><h2>ZGC (15, od 11)</h2><div class="slide-content"><div class="quoteblock"><blockquote><div class="paragraph"><p>Zee or Zed, both pronounciation are fine. Z stands for 'the'&#8230;&#8203; not.</p></div></blockquote></div><div class="olist arabic"><ol class="arabic"><li><p>By użyć: <code>-XX:+UseZGC -XX:+UnlockExperimentalVMOptions</code></p></li><li><p>By stroić: <code>-Xmx&lt;size&gt; -XX:ConcGCThreads=&lt;nr&gt;</code></p></li></ol></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa fa-info-circle" title="Note"></i></td><td class="content">J21 przywraca pokolenia</td></tr></table></div><div class="admonitionblock caution"><table><tr><td class="icon"><i class="fa fa-fire" title="Caution"></i></td><td class="content">ile wątków? heurystyka nieźle daje radę</td></tr></table></div></div></section><section id="_po_co_nam_zgc"><h2>Po co nam ZGC?</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li class="fragment"><p>wielo-TB sterty</p></li><li class="fragment"><p>max pauza: 10ms</p></li><li class="fragment"><p>współbieżny z apką, jak CMS</p></li><li class="fragment"><p>utrata przepustowości apki: max 15%</p></li></ol></div>
<div class="admonitionblock important"><table><tr><td class="icon"><i class="fa fa-exclamation-circle" title="Important"></i></td><td class="content">Czas pauzy nie rośnie kiedy rośnie sterta lub ilość osiągalnych obiektów</td></tr></table></div></div></section><section id="_czas_pauzy"><h2>Czas pauzy</h2><div class="slide-content"><div class="imageblock"><img src="./img/Z_dobrePauzyBoWspółbieżnieZApką.jpg" alt="wykres słupkowy gdzie Z wygrywa z G1 i Parallel mając krótsze pauzy"></div><div class="title">za: Per Lid, Stefan Karlsson</div></div></section><section id="_technikalia_5"><h2>Technikalia</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p>współbieżnie wyładowuje klasy - <strong>BEZ PAUZY</strong></p></li><li><p>zwraca nieużywaną pamięć</p></li><li><p>sterta od 8MB do 16TB</p></li><li><p>współbieżny i równoległy i jednopokoleniowy</p></li><li><p>bariery odczytu (load barriers), kolorowanie wskaźników, <strong>uwzględnia NUMA</strong></p></li><li><p>współbieżne procesowanie finalizacji i <a href="https://openjdk.java.net/jeps/376">(J16) stosów wątków</a></p></li></ol></div></div></section><section id="_źródła_6"><h2>Źródła</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p><a href="https://wiki.openjdk.java.net/display/zgc/Main">Wiki projektu</a></p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p><a href="https://openjdk.org/jeps/439">J21, JEP439, pokoleniowy ZGC</a></p></li><li><p><a href="https://openjdk.java.net/jeps/376">J16, JEP376, współbieżne procesowanie stosów wątków</a></p></li></ol></div></li><li><p><a href="https://docs.oracle.com/en/java/javase/11/gctuning/z-garbage-collector1.html#GUID-CD1DF73A-11D2-4478-BE14-20CBF8DA2830">Podręcznik</a></p></li><li><p><a href="https://www.youtube.com/watch?v=tShc0dyFtgw">JFokus VM Summit, wprowadzenie do ZGC Per Liden, Stefan Karlsson</a></p></li><li><p><a href="http://cr.openjdk.java.net/~pliden/slides/ZGC-PLMeetup-2019.pdf">Techniczne slajdy</a></p></li><li><p><a href="https://blogs.oracle.com/javamagazine/understanding-the-jdks-new-superfast-garbage-collectors">Java Magazine, artykuł o superszybkich śmieciarzach</a></p></li></ol></div></div></section><section id="_pytania_7"><h2>Pytania?</h2><div class="slide-content"><div class="imageblock"><img src="./img/question-mark.jpg" alt="question mark"></div></div></section></section>
<section><section id="_podsumowując"><h2>Podsumowując!</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p>CMS współbieżnie oznacza, ale!</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>kopiuje młodych przy pauzach</p></li><li><p>bez kompresji starego pokolenia</p></li><li><p>ConcurrentModeFailure - seryjnie</p></li></ol></div></li><li><p>G1 bez współbieżnej ewakuacji, pauza na kompresję</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>nie gwarantuje czasów pauz</p></li></ol></div></li></ol></div></div></section><section id="_nowe_pokolenie_algorytmów_od_j11"><h2>Nowe pokolenie algorytmów, od J11</h2><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p>równolegle i współbieżnie</p></li><li><p>jednopokoleniowo</p></li><li><p>słabiej przepustowość, szybszy czas odpowiedzi</p></li><li><p>większe sterty</p></li></ol></div></div></section><section id="_wydajność"><h2>Wydajność</h2><div class="slide-content"><div class="imageblock"><img src="./img/IonutBalosin_java-garbage-collector-types.png" alt="IonutBalosin java garbage collector types"></div><div class="title">Za: <a href="https://ionutbalosin.com/2019/12/jvm-garbage-collectors-benchmarks-report-19-12/" class="bare">https://ionutbalosin.com/2019/12/jvm-garbage-collectors-benchmarks-report-19-12/</a></div></div></section><section id="_a_przestrzeń_meta"><h2>A przestrzeń meta?</h2><div class="slide-content"><div class="paragraph"><p>Ta prezentacja świadomie pomija temat, ale dla chcących go zgłębić zalecam <a href="https://openjdk.java.net/jeps/387">JEP387, wprowadzony w J16, o elastycznej przestrzeni meta</a>.</p></div></div></section><section id="_z_vs_shenandoah"><h2>Z vs Shenandoah?</h2><div class="slide-content"><div class="paragraph"><p><strong>przedwczesne pytanie</strong>:</p></div>
<div class="paragraph"><p>Z wciąż usprawniany, wiele podobieństw obu (cele!), która Jawa? 11? 12? 13? 14? 15? 16?, jaka apka (co robi), jak bardzo potrzebna jest NUMA, testy Balosina z 13tki i syntetyczne, brak wieści z branży</p></div>
<div class="paragraph"><p><strong>*testujcie!</strong></p></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa fa-lightbulb-o" title="Tip"></i></td><td class="content"><a href="https://arxiv.org/pdf/2210.17175.pdf">Regularne i krótkie przerwy lepsze</a>?</td></tr></table></div></div></section><section><div class="slide-content"><div class="olist arabic"><ol class="arabic"><li><p>CMS: do 14, okienkowce i reaktywność, dużo strojenia</p></li><li><p>G1: 8, 9 domyślny, regionalizacja sterty, dojrzały</p></li><li><p>eksperymentalne:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Epsilon: od 11, tylko alokuje i nic więcej</p></li><li><p>Shenandoah: od 12, nie Oracle JDK, niskie pauzy</p></li><li><p>ZGC od 11 do 14, bezwzględnie niskie pauzy, TB sterty</p></li></ol></div></li><li><p>Java 15: Z i Shenandoah</p></li></ol></div></div></section><section id="_dziękuję_wam"><h2>Dziękuję Wam!</h2><div class="slide-content"><div class="paragraph"><p>Tomasz Borek @LAFK_pl</p></div>
<div class="paragraph"><p>Slajdy: <a href="http://www.lafk.pl/Prezki/gc9-15.html" class="bare">http://www.lafk.pl/Prezki/gc9-15.html</a></p></div></div></section></section></div></div><script src="reveal.js/dist/reveal.js"></script><script>Array.prototype.slice.call(document.querySelectorAll('.slides section')).forEach(function(slide) {
  if (slide.getAttribute('data-background-color')) return;
  // user needs to explicitly say he wants CSS color to override otherwise we might break custom css or theme (#226)
  if (!(slide.classList.contains('canvas') || slide.classList.contains('background'))) return;
  var bgColor = getComputedStyle(slide).backgroundColor;
  if (bgColor !== 'rgba(0, 0, 0, 0)' && bgColor !== 'transparent') {
    slide.setAttribute('data-background-color', bgColor);
    slide.style.backgroundColor = 'transparent';
  }
});

// More info about config & dependencies:
// - https://github.com/hakimel/reveal.js#configuration
// - https://github.com/hakimel/reveal.js#dependencies
Reveal.initialize({
  // Display presentation control arrows
  controls: true,
  // Help the user learn the controls by providing hints, for example by
  // bouncing the down arrow when they first encounter a vertical slide
  controlsTutorial: true,
  // Determines where controls appear, "edges" or "bottom-right"
  controlsLayout: 'bottom-right',
  // Visibility rule for backwards navigation arrows; "faded", "hidden"
  // or "visible"
  controlsBackArrows: 'faded',
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: 'true',
  // Control which views the slide number displays on
  showSlideNumber: 'all',
  // Add the current slide number to the URL hash so that reloading the
  // page/copying the URL will return you to the same slide
  hash: false,
  // Push each slide change to the browser history. Implies `hash: true`
  history: false,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Disables the default reveal.js slide layout so that you can use custom CSS layout
  disableLayout: false,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // See https://github.com/hakimel/reveal.js/#navigation-mode
  navigationMode: 'default',
  // Randomizes the order of slides each time the presentation loads
  shuffle: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags whether to include the current fragment in the URL,
  // so that reloading brings you to the same fragment position
  fragmentInURL: false,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Flags if we should show a help overlay when the questionmark
  // key is pressed
  help: true,
  // Flags if speaker notes should be visible to all viewers
  showNotes: false,
  // Global override for autolaying embedded media (video/audio/iframe)
  // - null: Media will only autoplay if data-autoplay is present
  // - true: All media will autoplay, regardless of individual setting
  // - false: No media will autoplay, regardless of individual setting
  autoPlayMedia: null,
  // Global override for preloading lazy-loaded iframes
  // - null: Iframes with data-src AND data-preload will be loaded when within
  //   the viewDistance, iframes with only data-src will be loaded when visible
  // - true: All iframes with data-src will be loaded when within the viewDistance
  // - false: All iframes with data-src will be loaded only when visible
  preloadIframes: null,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Use this method for navigation when auto-sliding
  autoSlideMethod: Reveal.navigateNext,
  // Specify the average time in seconds that you think you will spend
  // presenting each slide. This is used to show a pacing timer in the
  // speaker view
  defaultTiming: 120,
  // Specify the total time in seconds that is available to
  // present.  If this is set to a nonzero value, the pacing
  // timer will work out the time available for each slide,
  // instead of using the defaultTiming value
  totalTime: 0,
  // Specify the minimum amount of time you want to allot to
  // each slide, if using the totalTime calculation method.  If
  // the automated time allocation causes slide pacing to fall
  // below this threshold, then you will see an alert in the
  // speaker notes window
  minimumTimePerSlide: 0,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hide cursor if inactive
  hideInactiveCursor: true,
  // Time before the cursor is hidden (in ms)
  hideCursorTime: 5000,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  // Add `data-preview-link` and `data-preview-link="false"` to customise each link
  // individually
  previewLinks: false,
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: 'slide',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Number of slides away from the current that are visible on mobile
  // devices. It is advisable to set this to a lower number than
  // viewDistance in order to save resources.
  mobileViewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',
  // Number of pixels to move the parallax background per slide
  // - Calculated automatically unless specified
  // - Set to 0 to disable movement along an axis
  parallaxBackgroundHorizontal: null,
  parallaxBackgroundVertical: null,
  // The display mode that will be used to show slides
  display: 'block',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 960,
  height: 700,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // PDF Export Options
  // Put each fragment on a separate page
  pdfSeparateFragments: true,
  // For slides that do not fit on a page, max number of pages
  pdfMaxPagesPerSlide: 1,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'reveal.js/plugin/zoom/zoom.js', async: true, callback: function () { Reveal.registerPlugin(RevealZoom) } },
      { src: 'reveal.js/plugin/notes/notes.js', async: true, callback: function () { Reveal.registerPlugin(RevealNotes) } }
  ],
});</script><script>var dom = {};
dom.slides = document.querySelector('.reveal .slides');

function getRemainingHeight(element, slideElement, height) {
  height = height || 0;
  if (element) {
    var newHeight, oldHeight = element.style.height;
    // Change the .stretch element height to 0 in order find the height of all
    // the other elements
    element.style.height = '0px';
    // In Overview mode, the parent (.slide) height is set of 700px.
    // Restore it temporarily to its natural height.
    slideElement.style.height = 'auto';
    newHeight = height - slideElement.offsetHeight;
    // Restore the old height, just in case
    element.style.height = oldHeight + 'px';
    // Clear the parent (.slide) height. .removeProperty works in IE9+
    slideElement.style.removeProperty('height');
    return newHeight;
  }
  return height;
}

function layoutSlideContents(width, height) {
  // Handle sizing of elements with the 'stretch' class
  toArray(dom.slides.querySelectorAll('section .stretch')).forEach(function (element) {
    // Determine how much vertical space we can use
    var limit = 5; // hard limit
    var parent = element.parentNode;
    while (parent.nodeName !== 'SECTION' && limit > 0) {
      parent = parent.parentNode;
      limit--;
    }
    if (limit === 0) {
      // unable to find parent, aborting!
      return;
    }
    var remainingHeight = getRemainingHeight(element, parent, height);
    // Consider the aspect ratio of media elements
    if (/(img|video)/gi.test(element.nodeName)) {
      var nw = element.naturalWidth || element.videoWidth, nh = element.naturalHeight || element.videoHeight;
      var es = Math.min(width / nw, remainingHeight / nh);
      element.style.width = (nw * es) + 'px';
      element.style.height = (nh * es) + 'px';
    } else {
      element.style.width = width + 'px';
      element.style.height = remainingHeight + 'px';
    }
  });
}

function toArray(o) {
  return Array.prototype.slice.call(o);
}

Reveal.addEventListener('slidechanged', function () {
  layoutSlideContents(960, 700)
});
Reveal.addEventListener('ready', function () {
  layoutSlideContents(960, 700)
});
Reveal.addEventListener('resize', function () {
  layoutSlideContents(960, 700)
});</script></body></html>